(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,52683,e=>{"use strict";e.s(["default",()=>u],52683);var t=e.i(43476),a=e.i(71645);let s=["èèŸ»éŠ€è¡Œï¼ˆæ¾³é–€ï¼‰è‚¡ä»½æœ‰é™å…¬å¸","ä¸­åœ‹éŠ€è¡Œï¼ˆæ¾³é–€ï¼‰è‚¡ä»½æœ‰é™å…¬å¸","å»£ç™¼éŠ€è¡Œè‚¡ä»½æœ‰é™å…¬å¸æ¾³é–€åˆ†è¡Œ","ä¸­åœ‹å·¥å•†éŠ€è¡Œï¼ˆæ¾³é–€ï¼‰è‚¡ä»½æœ‰é™å…¬å¸","æ¾³é–€åœ‹éš›éŠ€è¡Œè‚¡ä»½æœ‰é™å…¬å¸","æ¾³é–€é€šè‚¡ä»½æœ‰é™å…¬å¸","å¤§è±éŠ€è¡Œè‚¡ä»½æœ‰é™å…¬å¸","æ¾³é–€æ¥µæ˜“ä»˜è‚¡ä»½æœ‰é™å…¬å¸"],r="macau-spending-rewards-awards",l=()=>{try{let e=localStorage.getItem(r);if(!e)return[];return JSON.parse(e).map(e=>({...e,bank:e.bank||"èèŸ»éŠ€è¡Œï¼ˆæ¾³é–€ï¼‰è‚¡ä»½æœ‰é™å…¬å¸",isThankYou:void 0!==e.isThankYou?e.isThankYou:0===e.value}))}catch(e){return console.error("Error loading awards from localStorage:",e),[]}},d=e=>{try{localStorage.setItem(r,JSON.stringify(e))}catch(e){console.error("Error saving awards to localStorage:",e)}},n=e=>{let t=l(),a={...e,id:Date.now().toString()+Math.random().toString(36).substr(2,9)};return t.push(a),d(t),a},i=(e,t)=>{let a=l(),s=a.findIndex(t=>t.id===e);return -1===s?null:(a[s]={...a[s],...t},d(a),a[s])},c=()=>{let e=l(),t=new Date,a=new Date(t);a.setDate(t.getDate()-t.getDay()+1),a.setHours(0,0,0,0);let r=new Date(a);r.setDate(a.getDate()+6),r.setHours(23,59,59,999);let d=new Set(e.filter(e=>{let t=new Date(e.drawDate);return t>=a&&t<=r}).map(e=>e.bank));return s.filter(e=>!d.has(e))};function o(e){let{award:r,onSave:l,onCancel:d,existingAwards:n=[]}=e,i=()=>({value:10,drawDate:"",expiryDate:"",redeemed:!1,redeemedDate:"",merchant:"",notes:"",bank:s[0],isThankYou:!1}),c=(0,a.useCallback)(e=>{let t=new Date,a=new Date(t),s=t.getDay();0===s?a.setDate(t.getDate()+1):6===s&&a.setDate(t.getDate()+2);let r=a.toISOString().split("T")[0],l=i();return l.drawDate=r,l.expiryDate=w(r),e&&(l.bank=e),l},[]),[o,x]=(0,a.useState)([i()]),[m,u]=(0,a.useState)([""]),[g,h]=(0,a.useState)([]),[b,p]=(0,a.useState)(null),[j,v]=(0,a.useState)(-1),y=(0,a.useCallback)(()=>n.map(e=>e.merchant).filter(e=>void 0!==e&&""!==e.trim()).filter((e,t,a)=>a.indexOf(e)===t).sort(),[n]);(0,a.useEffect)(()=>{h(y())},[y]);let f=(e,t)=>{let a=[...o];a[e]={...a[e],merchant:t},x(a),p(null)},N=e=>e?g.filter(t=>t.toLowerCase().includes(e.toLowerCase())).slice(0,5):[],w=e=>{let t=new Date(e),a=t.getDay(),s=0;s=0===a?7:6===a?1:7-a;let r=new Date(t);return r.setDate(t.getDate()+s),r.toISOString().split("T")[0]};(0,a.useEffect)(()=>{r?x([{value:r.value,drawDate:r.drawDate.split("T")[0],expiryDate:r.expiryDate.split("T")[0],redeemed:r.redeemed,redeemedDate:r.redeemedDate?r.redeemedDate.split("T")[0]:"",merchant:r.merchant||"",notes:r.notes||"",bank:r.bank||s[0],isThankYou:r.isThankYou||!1}]):x([c()]),u([""])},[r,c]);let k=(e,t,a)=>{let s=[...o];s[e]={...s[e],[t]:a},x(s)};return(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md border max-w-4xl mx-auto",children:[(0,t.jsx)("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:r?"ç·¨è¼¯çå“":"æ–°å¢çå“"}),(0,t.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),m.some(e=>e))return void alert("è«‹ä¿®æ­£æ—¥æœŸéŒ¯èª¤å¾Œå†æäº¤");l(o.map(e=>({value:e.value,drawDate:new Date(e.drawDate).toISOString(),expiryDate:new Date(e.expiryDate).toISOString(),redeemed:e.redeemed,redeemedDate:e.redeemed&&e.redeemedDate?new Date(e.redeemedDate).toISOString():void 0,merchant:e.merchant||void 0,notes:e.notes||void 0,bank:e.bank,isThankYou:e.isThankYou})))},className:"space-y-6",children:[o.map((e,a)=>(0,t.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 relative",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-700",children:["çå“ ",a+1,e.isThankYou&&(0,t.jsx)("span",{className:"ml-2 text-orange-600 font-normal",children:"(è¬è¬æƒ é¡§)"})]}),o.length>1&&(0,t.jsx)("button",{type:"button",onClick:()=>(e=>{if(o.length>1){let t=o.filter((t,a)=>a!==e),a=m.filter((t,a)=>a!==e);x(t),u(a)}})(a),className:"text-red-500 hover:text-red-700 text-sm",children:"ç§»é™¤"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"çå“é¢å€¼ (MOP)"}),(0,t.jsxs)("select",{value:e.value,onChange:e=>((e,t)=>{let a=[...o];a[e]={...a[e],value:t,isThankYou:0===t},x(a)})(a,parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800",required:!0,children:[(0,t.jsx)("option",{value:0,children:"è¬è¬æƒ é¡§"}),(0,t.jsx)("option",{value:10,children:"10 MOP"}),(0,t.jsx)("option",{value:20,children:"20 MOP"}),(0,t.jsx)("option",{value:50,children:"50 MOP"}),(0,t.jsx)("option",{value:100,children:"100 MOP"}),(0,t.jsx)("option",{value:200,children:"200 MOP"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"æ‰¿è¾¦å–®ä½"}),(0,t.jsx)("select",{value:e.bank,onChange:e=>k(a,"bank",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800",required:!0,children:s.map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"æŠ½çæ—¥æœŸ"}),(0,t.jsx)("input",{type:"date",value:e.drawDate,onChange:e=>((e,t)=>{let a=(e=>{let t=new Date(e).getDay();return 0!==t&&6!==t})(t),s=[...m];s[e]=a?"":"æŠ½çæ—¥æœŸä¸èƒ½æ˜¯æ˜ŸæœŸå…­æˆ–æ˜ŸæœŸæ—¥",u(s);let r=w(t),l=[...o];l[e]={...l[e],drawDate:t,expiryDate:r},x(l)})(a,e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800 ".concat(m[a]?"border-red-500":"border-gray-300"),required:!0}),m[a]&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:m[a]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"åˆ°æœŸæ—¥æœŸ"}),(0,t.jsx)("input",{type:"date",value:e.expiryDate,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 cursor-not-allowed text-gray-800",title:"åˆ°æœŸæ—¥æœŸæ ¹æ“šæŠ½çæ—¥æœŸè‡ªå‹•è¨ˆç®—"}),(0,t.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"æ ¹æ“šæŠ½çæ—¥æœŸè‡ªå‹•è¨ˆç®—"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"å•†æˆ¶åç¨±"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"text",value:e.merchant,onChange:e=>((e,t)=>{let a=[...o];a[e]={...a[e],merchant:t},x(a),p(t.length>0&&g.length>0?e:null),v(-1)})(a,e.target.value),onKeyDown:e=>((e,t)=>{let a=N(o[e].merchant);if(b&&0!==a.length)switch(t.key){case"ArrowDown":t.preventDefault(),v(e=>e<a.length-1?e+1:0);break;case"ArrowUp":t.preventDefault(),v(e=>e>0?e-1:a.length-1);break;case"Enter":t.preventDefault(),j>=0&&j<a.length&&f(e,a[j]);break;case"Escape":p(null),v(-1)}})(a,e),onFocus:()=>{e.merchant&&g.length>0&&p(a)},onBlur:()=>{setTimeout(()=>{p(null),v(-1)},200)},placeholder:"å¯é¸",className:"w-full px-3 py-2 pr-8 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800"}),g.length>0&&(0,t.jsx)("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-xs text-gray-400 pointer-events-none",children:"ğŸ’¡"})]}),b===a&&(0,t.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-40 overflow-y-auto",children:N(e.merchant).length>0?N(e.merchant).map((e,s)=>(0,t.jsx)("div",{onClick:()=>f(a,e),className:"px-3 py-2 cursor-pointer text-sm border-b border-gray-100 last:border-b-0 ".concat(s===j?"bg-blue-100 text-blue-900":"hover:bg-gray-100"),children:e},s)):e.merchant&&(0,t.jsx)("div",{className:"px-3 py-2 text-sm text-gray-500",children:"ç„¡åŒ¹é…çš„å•†æˆ¶å»ºè­°"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"å‚™è¨»"}),(0,t.jsx)("input",{type:"text",value:e.notes,onChange:e=>k(a,"notes",e.target.value),placeholder:"å¯é¸",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800"})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 mt-4",children:[(0,t.jsx)("input",{type:"checkbox",id:"redeemed-".concat(a),checked:e.redeemed,onChange:e=>k(a,"redeemed",e.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),(0,t.jsx)("label",{htmlFor:"redeemed-".concat(a),className:"text-sm font-medium text-gray-700",children:"å·²å…Œæ›"})]}),e.redeemed&&(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"å…Œæ›æ—¥æœŸ"}),(0,t.jsx)("input",{type:"date",value:e.redeemedDate,onChange:e=>k(a,"redeemedDate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800",required:e.redeemed})]})]},a)),o.length>=1&&!r&&(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("button",{type:"button",onClick:()=>{let e=o[o.length-1];x([...o,c(e?e.bank:void 0)]),u([...m,""])},className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 transition-colors",children:"+ æ·»åŠ å¦ä¸€å€‹çå“"})}),(0,t.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,t.jsx)("button",{type:"submit",disabled:m.some(e=>e),className:"px-4 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors ".concat(m.some(e=>e)?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:r?"æ›´æ–°":"æ–°å¢ ".concat(o.length," å€‹çå“")}),(0,t.jsx)("button",{type:"button",onClick:d,className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors",children:"å–æ¶ˆ"})]})]})]})}function x(e){let{awards:s,onEdit:r,onDelete:l,onToggleRedeemed:d,onUpdateMerchant:n}=e,[i,c]=(0,a.useState)("date"),[o,x]=(0,a.useState)("desc"),[m,u]=(0,a.useState)("pending"),[g,h]=(0,a.useState)(""),[b,p]=(0,a.useState)(null),[j,v]=(0,a.useState)(""),[y,f]=(0,a.useState)(!1),[N,w]=(0,a.useState)(-1),k=(0,a.useCallback)(()=>s.map(e=>e.merchant).filter(e=>void 0!==e&&""!==e.trim()).filter((e,t,a)=>a.indexOf(e)===t).sort(),[s])(),D=e=>e?k.filter(t=>t.toLowerCase().includes(e.toLowerCase())).slice(0,5):[],A=e=>new Date(e).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"}),S=e=>!e.redeemed&&new Date(e.expiryDate)<new Date,C=s.filter(e=>{switch(m){case"pending":if(e.redeemed)return!1;break;case"redeemed":if(!e.redeemed)return!1;break;case"expired":if(!S(e))return!1}if(g){var t,a;let s=g.toLowerCase(),r=null==(t=e.merchant)?void 0:t.toLowerCase().includes(s),l=e.bank.toLowerCase().includes(s),d=null==(a=e.notes)?void 0:a.toLowerCase().includes(s),n=e.value.toString().includes(g);if(!r&&!l&&!d&&!n)return!1}return!0}).sort((e,t)=>{let a=0;switch(i){case"date":a=new Date(t.drawDate).getTime()-new Date(e.drawDate).getTime();break;case"value":a=t.value-e.value;break;case"status":a=e.redeemed===t.redeemed?new Date(t.drawDate).getTime()-new Date(e.drawDate).getTime():e.redeemed?1:-1;break;case"bank":a=e.bank.localeCompare(t.bank);break;case"merchant":let s=e.merchant||"",r=t.merchant||"";a=s.localeCompare(r);break;case"expiry":a=new Date(e.expiryDate).getTime()-new Date(t.expiryDate).getTime();break;default:a=0}return"asc"===o?a:-a}),O=e=>{let t=D(j);if(y&&0!==t.length)switch(e.key){case"ArrowDown":e.preventDefault(),w(e=>e<t.length-1?e+1:0);break;case"ArrowUp":e.preventDefault(),w(e=>e>0?e-1:t.length-1);break;case"Enter":e.preventDefault(),N>=0&&N<t.length&&T(t[N]);break;case"Escape":f(!1),w(-1)}},T=e=>{v(e),f(!1),w(-1)},V=()=>{p(null),v(""),f(!1),w(-1)};return(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md border",children:[(0,t.jsx)("div",{className:"p-4 border-b",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"çå“è¨˜éŒ„"}),(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:["é¡¯ç¤º ",C.length," / ",s.length," ç­†è¨˜éŒ„"]})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"text",placeholder:"æœç´¢å•†æˆ¶ã€éŠ€è¡Œã€å‚™è¨»æˆ–é¢å€¼...",value:g,onChange:e=>h(e.target.value),className:"px-3 py-1 pr-8 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800"}),g&&(0,t.jsx)("button",{onClick:()=>h(""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 text-sm",title:"æ¸…é™¤æœç´¢",children:"âœ•"})]}),(0,t.jsxs)("select",{value:m,onChange:e=>u(e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800",children:[(0,t.jsx)("option",{value:"all",children:"å…¨éƒ¨"}),(0,t.jsx)("option",{value:"pending",children:"å¾…å…Œæ›"}),(0,t.jsx)("option",{value:"redeemed",children:"å·²å…Œæ›"}),(0,t.jsx)("option",{value:"expired",children:"å·²éæœŸ"})]}),(0,t.jsxs)("select",{value:i,onChange:e=>c(e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800",children:[(0,t.jsx)("option",{value:"date",children:"æŒ‰æ—¥æœŸæ’åº"}),(0,t.jsx)("option",{value:"value",children:"æŒ‰é¢å€¼æ’åº"}),(0,t.jsx)("option",{value:"status",children:"æŒ‰ç‹€æ…‹æ’åº"}),(0,t.jsx)("option",{value:"bank",children:"æŒ‰éŠ€è¡Œæ’åº"}),(0,t.jsx)("option",{value:"merchant",children:"æŒ‰å•†æˆ¶æ’åº"}),(0,t.jsx)("option",{value:"expiry",children:"æŒ‰åˆ°æœŸæ—¥æœŸæ’åº"})]}),(0,t.jsx)("button",{onClick:()=>x("asc"===o?"desc":"asc"),className:"px-3 py-1 border border-gray-300 rounded-md text-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",title:"åˆ‡æ›æ’åºé †åº (".concat("asc"===o?"å‡åº":"é™åº",")"),children:"asc"===o?"â†‘":"â†“"})]})]})}),(0,t.jsx)("div",{className:"overflow-x-auto",children:0===C.length?(0,t.jsx)("div",{className:"p-8 text-center text-gray-500",children:"all"===m?"é‚„æ²’æœ‰è¨˜éŒ„ä»»ä½•çå“":"æ²’æœ‰ç¬¦åˆæ¢ä»¶çš„çå“"}):(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"é¢å€¼"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"æ‰¿è¾¦å–®ä½"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"æŠ½çæ—¥æœŸ"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"åˆ°æœŸæ—¥æœŸ"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"å•†æˆ¶"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ç‹€æ…‹"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"æ“ä½œ"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.isThankYou?(0,t.jsx)("span",{className:"text-orange-600 font-semibold",children:"è¬è¬æƒ é¡§"}):"".concat(e.value," MOP")})}),(0,t.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm text-gray-900 max-w-xs truncate",title:e.bank,children:e.bank})}),(0,t.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm text-gray-900",children:A(e.drawDate)})}),(0,t.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm ".concat(S(e)?"text-red-600 font-medium":"text-gray-900"),children:A(e.expiryDate)})}),(0,t.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:b===e.id?(0,t.jsx)("div",{className:"relative",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)("input",{type:"text",value:j,onChange:e=>{var t;v(t=e.target.value),f(t.length>0&&k.length>0),w(-1)},onKeyDown:O,onFocus:()=>{j&&k.length>0&&f(!0)},onBlur:()=>{setTimeout(()=>{f(!1),w(-1)},200)},className:"text-sm border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500 w-full text-gray-800",placeholder:"è¼¸å…¥å•†æˆ¶åç¨±",autoFocus:!0}),k.length>0&&(0,t.jsx)("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-xs text-gray-400 pointer-events-none",children:"ğŸ’¡"}),y&&(0,t.jsx)("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-32 overflow-y-auto",children:D(j).length>0?D(j).map((e,a)=>(0,t.jsx)("div",{onClick:()=>T(e),className:"px-3 py-2 cursor-pointer text-sm border-b border-gray-100 last:border-b-0 ".concat(a===N?"bg-blue-100 text-blue-900":"hover:bg-gray-100"),children:e},a)):j&&(0,t.jsx)("div",{className:"px-3 py-2 text-sm text-gray-500",children:"ç„¡åŒ¹é…çš„å•†æˆ¶å»ºè­°"})})]}),(0,t.jsx)("button",{onClick:()=>{n(e.id,j.trim()||void 0),p(null),v(""),f(!1),w(-1)},className:"text-green-600 hover:text-green-800 text-sm",title:"ä¿å­˜",children:"âœ“"}),(0,t.jsx)("button",{onClick:V,className:"text-red-600 hover:text-red-800 text-sm",title:"å–æ¶ˆ",children:"âœ•"})]})}):(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"text-sm text-gray-900",children:e.merchant||"-"}),(0,t.jsx)("button",{onClick:()=>{p(e.id),v(e.merchant||""),f(!1),w(-1)},className:"text-blue-600 hover:text-blue-800 text-sm",title:"ç·¨è¼¯å•†æˆ¶",children:"âœï¸"})]})}),(0,t.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:e.redeemed?(0,t.jsx)("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full",children:"å·²å…Œæ›"}):S(e)?(0,t.jsx)("span",{className:"px-2 py-1 text-xs bg-red-100 text-red-800 rounded-full",children:"å·²éæœŸ"}):(0,t.jsx)("span",{className:"px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded-full",children:"å¾…å…Œæ›"})}),(0,t.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[(0,t.jsx)("button",{onClick:()=>d(e.id),className:"px-2 py-1 rounded text-xs ".concat(e.redeemed?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-green-100 text-green-700 hover:bg-green-200"),children:e.redeemed?"å–æ¶ˆå…Œæ›":"æ¨™è¨˜å…Œæ›"}),(0,t.jsx)("button",{onClick:()=>r(e),className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs hover:bg-blue-200",children:"ç·¨è¼¯"}),(0,t.jsx)("button",{onClick:()=>l(e.id),className:"px-2 py-1 bg-red-100 text-red-700 rounded text-xs hover:bg-red-200",children:"åˆªé™¤"})]})]},e.id))})]})})]})}function m(e){var a,r,l;let{summary:d}=e,n=e=>"".concat(e.toLocaleString()," MOP"),i=(e,t)=>t>0?Math.round(e/t*100):0;return(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md border",children:[(0,t.jsx)("h2",{className:"text-xl font-bold mb-6 text-gray-800",children:"çå“çµ±è¨ˆ"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,t.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:d.totalAwards}),(0,t.jsx)("div",{className:"text-sm text-blue-800",children:"ç¸½çå“æ•¸"})]}),(0,t.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:d.redeemedAwards}),(0,t.jsx)("div",{className:"text-sm text-green-800",children:"å·²å…Œæ›"}),(0,t.jsxs)("div",{className:"text-xs text-green-600 mt-1",children:[i(d.redeemedAwards,d.totalAwards),"%"]})]}),(0,t.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:d.pendingAwards}),(0,t.jsx)("div",{className:"text-sm text-yellow-800",children:"å¾…å…Œæ›"})]}),(0,t.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-red-600",children:d.expiredAwards}),(0,t.jsx)("div",{className:"text-sm text-red-800",children:"å·²éæœŸ"})]})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-lg mb-6 border border-blue-200",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800 flex items-center",children:"ğŸ’° åƒ¹å€¼çµ±è¨ˆç¸½è¦½"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"text-center bg-white p-4 rounded-lg shadow-sm",children:[(0,t.jsx)("div",{className:"text-xl font-bold text-blue-600",children:n(d.totalValue)}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"ç¸½åƒ¹å€¼"})]}),(0,t.jsxs)("div",{className:"text-center bg-white p-4 rounded-lg shadow-sm",children:[(0,t.jsx)("div",{className:"text-xl font-bold text-green-600",children:n(d.redeemedValue)}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"å·²å…Œæ›åƒ¹å€¼"})]}),(0,t.jsxs)("div",{className:"text-center bg-white p-4 rounded-lg shadow-sm",children:[(0,t.jsx)("div",{className:"text-xl font-bold text-yellow-600",children:n(d.pendingValue)}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"å¾…å…Œæ›åƒ¹å€¼"})]}),(0,t.jsxs)("div",{className:"text-center bg-white p-4 rounded-lg shadow-sm",children:[(0,t.jsx)("div",{className:"text-xl font-bold text-red-600",children:n(d.expiredValue)}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"å·²éæœŸåƒ¹å€¼"})]})]})]}),d.totalAwards>0&&(0,t.jsxs)("div",{className:"border-t pt-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"ğŸ¯ å…Œæ›é€²åº¦"}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-6 mb-3",children:(0,t.jsxs)("div",{className:"bg-gradient-to-r from-green-500 to-green-600 h-6 rounded-full transition-all duration-500 flex items-center justify-center text-white text-sm font-medium",style:{width:"".concat(i(d.redeemedAwards,d.totalAwards),"%")},children:[i(d.redeemedAwards,d.totalAwards),"%"]})}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-gray-800 mb-1",children:[d.redeemedAwards," / ",d.totalAwards]}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"çå“å·²å…Œæ›"})]})]}),d.topBigAwardBanks.length>0&&(0,t.jsxs)("div",{className:"border-t pt-6 mt-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"ğŸ† å¤§çæ©Ÿç‡æœ€é«˜çš„éŠ€è¡Œ TOP 3"}),(0,t.jsx)("div",{className:"space-y-3",children:d.topBigAwardBanks.map((e,a)=>(0,t.jsx)("div",{className:"p-4 rounded-lg border-2 ".concat(0===a?"bg-gradient-to-r from-yellow-50 to-yellow-100 border-yellow-300":1===a?"bg-gradient-to-r from-gray-50 to-gray-100 border-gray-300":"bg-gradient-to-r from-orange-50 to-orange-100 border-orange-300"),children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-lg font-bold ".concat(0===a?"bg-yellow-400 text-yellow-900 shadow-lg":1===a?"bg-gray-400 text-white shadow-lg":"bg-orange-400 text-orange-900 shadow-lg"),children:a+1}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-semibold text-gray-800 truncate max-w-xs",title:e.bank,children:e.bank}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["å¤§çæ©Ÿç‡: ",(0,t.jsxs)("span",{className:"font-bold text-green-600",children:[e.probability,"%"]})]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"text-xl font-bold text-gray-800",children:[e.bigAwards,"/",e.totalAwards]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:[e.bigAwardValue," MOP"]})]})]})},e.bank))})]}),(0,t.jsxs)("div",{className:"border-t pt-6 mt-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"ğŸ“Š éŠ€è¡Œçå“è©³æƒ…"}),(0,t.jsx)("div",{className:"space-y-4",children:s.map(e=>{let a=d.bankValueDistribution[e];if(!a||0===a.totalAwards)return null;let s=a.bigAwards>0;return(0,t.jsxs)("div",{className:"border rounded-lg p-4 ".concat(s?"border-yellow-300 bg-yellow-50":"border-gray-200 bg-white"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-800 truncate",title:e,children:e}),s&&(0,t.jsx)("span",{className:"text-yellow-600",children:"ğŸ¯"})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["ç¸½è¨ˆ: ",(0,t.jsx)("span",{className:"font-bold",children:a.totalAwards})," çå“"]})]}),(0,t.jsx)("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-2 mb-3",children:[0,10,20,50,100,200].map(e=>{let s=a.valueBreakdown[e]||0,r=a.totalAwards>0?s/a.totalAwards*100:0;return(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-sm font-medium px-2 py-2 rounded-lg ".concat(0===e?"bg-orange-100 text-orange-800 border border-orange-200":e>=100?"bg-green-100 text-green-800 border border-green-200":"bg-blue-100 text-blue-800 border border-blue-200"),children:0===e?"è¬è¬æƒ é¡§":"".concat(e,"MOP")}),(0,t.jsxs)("div",{className:"text-xs text-gray-600 mt-1 font-medium",children:[s," (",Math.round(r),"%)"]})]},e)})}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-sm border-t pt-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("span",{className:"text-gray-600",children:["å¤§çæ©Ÿç‡: ",(0,t.jsxs)("span",{className:"font-bold ".concat(s?"text-green-600":"text-gray-500"),children:[Math.round(100*a.probability)/100,"%"]})]}),(0,t.jsxs)("span",{className:"text-gray-600",children:["ç¸½åƒ¹å€¼: ",(0,t.jsxs)("span",{className:"font-bold text-blue-600",children:[a.totalValue," MOP"]})]})]}),s&&(0,t.jsx)("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full",children:"å¤§çéŠ€è¡Œ"})]})]},e)})})]}),(0,t.jsxs)("div",{className:"border-t pt-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"ğŸ’° é¢å€¼çµ±è¨ˆè©³æƒ…"}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h4",{className:"text-md font-medium mb-3 text-gray-700",children:"ç¸½é«”é¢å€¼åˆ†ä½ˆ"}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-3",children:[0,10,20,50,100,200].map(e=>{let a=d.valueDistribution[e]||0,s=d.totalAwards>0?a/d.totalAwards*100:0;return(0,t.jsx)("div",{className:"text-center",children:(0,t.jsxs)("div",{className:"p-3 rounded-lg border-2 ".concat(0===e?"bg-orange-50 border-orange-200":e>=100?"bg-green-50 border-green-200":"bg-blue-50 border-blue-200"),children:[(0,t.jsx)("div",{className:"text-lg font-bold text-gray-800",children:a}),(0,t.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:0===e?"è¬è¬æƒ é¡§":"".concat(e," MOP")}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[Math.round(s),"%"]})]})},e)})})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h4",{className:"text-md font-medium mb-3 text-gray-700",children:"å…Œæ›ç‹€æ…‹è©³æƒ…"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[0,10,20,50,100,200].map(e=>{let a=d.detailedValueStats[e],s=a?a.total:0;return 0===s?(0,t.jsx)("div",{className:"p-4 rounded-lg border border-gray-200 bg-gray-50",children:(0,t.jsxs)("div",{className:"text-center text-gray-400",children:[(0,t.jsx)("div",{className:"font-medium",children:0===e?"è¬è¬æƒ é¡§":"".concat(e," MOP")}),(0,t.jsx)("div",{className:"text-sm",children:"ç„¡è¨˜éŒ„"})]})},e):(0,t.jsxs)("div",{className:"p-4 rounded-lg border ".concat(0===e?"bg-orange-50 border-orange-200":e>=100?"bg-green-50 border-green-200":"bg-blue-50 border-blue-200"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("h5",{className:"font-semibold text-gray-800",children:0===e?"è¬è¬æƒ é¡§":"".concat(e," MOP")}),(0,t.jsx)("span",{className:"text-sm font-bold text-gray-600",children:s})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"ç¸½æ•¸:"}),(0,t.jsx)("span",{className:"font-medium",children:a.total})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-green-600",children:"å·²å…Œæ›:"}),(0,t.jsx)("span",{className:"font-medium text-green-600",children:a.redeemed})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-yellow-600",children:"å¾…å…Œæ›:"}),(0,t.jsx)("span",{className:"font-medium text-yellow-600",children:a.pending})]}),a.expired>0&&(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-red-600",children:"å·²éæœŸ:"}),(0,t.jsx)("span",{className:"font-medium text-red-600",children:a.expired})]}),(0,t.jsx)("div",{className:"pt-2 border-t border-gray-200",children:(0,t.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,t.jsx)("span",{children:"ç¸½åƒ¹å€¼:"}),(0,t.jsxs)("span",{children:[a.totalValue," MOP"]})]})})]})]},e)})})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,t.jsx)("h4",{className:"text-md font-medium mb-3 text-gray-700",children:"çµ±è¨ˆæ‘˜è¦"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-lg font-bold text-blue-600",children:Object.values(d.detailedValueStats).reduce((e,t)=>e+t.total,0)}),(0,t.jsx)("div",{className:"text-gray-600",children:"ç¸½çå“æ•¸"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-lg font-bold text-green-600",children:((null==(a=d.detailedValueStats[100])?void 0:a.total)||0)+((null==(r=d.detailedValueStats[200])?void 0:r.total)||0)}),(0,t.jsx)("div",{className:"text-gray-600",children:"å¤§çæ•¸é‡"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-lg font-bold text-orange-600",children:(null==(l=d.detailedValueStats[0])?void 0:l.total)||0}),(0,t.jsx)("div",{className:"text-gray-600",children:"è¬è¬æƒ é¡§"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-lg font-bold text-purple-600",children:Object.keys(d.detailedValueStats).filter(e=>d.detailedValueStats[Number(e)].total>0).length}),(0,t.jsx)("div",{className:"text-gray-600",children:"ä¸åŒé¢å€¼"})]})]})]})]}),(0,t.jsxs)("div",{className:"border-t pt-6 mt-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"æ‰¿è¾¦å–®ä½åˆ†ä½ˆ"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:s.map(e=>{let a=d.bankValueDistribution[e],s=a&&a.bigAwards>0;return(0,t.jsxs)("div",{className:"p-4 rounded-lg ".concat(s?"bg-yellow-50 border-2 border-yellow-300":"bg-gray-50"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("div",{className:"text-xl font-bold text-gray-800",children:d.bankDistribution[e]||0}),s&&(0,t.jsx)("span",{className:"text-yellow-600 text-sm font-semibold",children:"ğŸ¯"})]}),(0,t.jsx)("div",{className:"text-sm text-gray-600 truncate mb-2",title:e,children:e}),a&&(0,t.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[(0,t.jsxs)("div",{children:["å¤§ç: ",a.bigAwards," (",Math.round(100*a.probability)/100,"%)"]}),(0,t.jsxs)("div",{children:["ç¸½å€¼: ",a.totalValue," MOP"]})]})]},e)})}),(0,t.jsx)("div",{className:"mt-4 text-sm text-gray-600",children:(0,t.jsxs)("span",{className:"inline-flex items-center",children:[(0,t.jsx)("span",{className:"w-3 h-3 bg-yellow-300 border border-yellow-600 rounded mr-2"}),"æä¾›å¤§ç (â‰¥100 MOP) çš„éŠ€è¡Œ"]})})]})]})}function u(){let[e,s]=(0,a.useState)([]),[r,u]=(0,a.useState)(!1),[g,h]=(0,a.useState)(),[b,p]=(0,a.useState)("list"),[j,v]=(0,a.useState)([]);(0,a.useEffect)(()=>{s(l()),v(c())},[]);let y=(()=>{let e=l(),t=e.length,a=e.filter(e=>e.redeemed).length,s=e.reduce((e,t)=>e+t.value,0),r=e.filter(e=>e.redeemed).reduce((e,t)=>e+t.value,0),d=e.reduce((e,t)=>(e[t.value]=(e[t.value]||0)+1,e),{}),n=e.reduce((e,t)=>(e[t.value]||(e[t.value]={total:0,redeemed:0,pending:0,expired:0,totalValue:0,redeemedValue:0,pendingValue:0}),e[t.value].total+=1,e[t.value].totalValue+=t.value,t.redeemed?(e[t.value].redeemed+=1,e[t.value].redeemedValue+=t.value):(e[t.value].pending+=1,e[t.value].pendingValue+=t.value,new Date(t.expiryDate)<new Date&&(e[t.value].expired+=1)),e),{}),i=e.reduce((e,t)=>(e[t.bank]=(e[t.bank]||0)+1,e),{}),c=e.reduce((e,t)=>(e[t.bank]||(e[t.bank]={totalAwards:0,valueBreakdown:{},bigAwards:0,totalValue:0,bigAwardValue:0,probability:0}),e[t.bank].totalAwards+=1,e[t.bank].valueBreakdown[t.value]=(e[t.bank].valueBreakdown[t.value]||0)+1,e[t.bank].totalValue+=t.value,t.value>=100&&(e[t.bank].bigAwards+=1,e[t.bank].bigAwardValue+=t.value),e),{});Object.keys(c).forEach(e=>{let t=c[e];t.probability=t.totalAwards>0?t.bigAwards/t.totalAwards*100:0});let o=Object.entries(c).filter(e=>{let[,t]=e;return t.totalAwards>0}).sort((e,t)=>t[1].probability!==e[1].probability?t[1].probability-e[1].probability:t[1].bigAwards-e[1].bigAwards).slice(0,3).map(e=>{let[t,a]=e;return{bank:t,probability:Math.round(100*a.probability)/100,bigAwards:a.bigAwards,totalAwards:a.totalAwards,bigAwardValue:a.bigAwardValue}}),x=new Date,m=e.filter(e=>!e.redeemed&&new Date(e.expiryDate)<x).length;return{totalAwards:t,redeemedAwards:a,pendingAwards:t-a,totalValue:s,redeemedValue:r,pendingValue:s-r,expiredValue:e.filter(e=>!e.redeemed&&new Date(e.expiryDate)<x).reduce((e,t)=>e+t.value,0),valueDistribution:d,detailedValueStats:n,bankDistribution:i,bankValueDistribution:c,topBigAwardBanks:o,expiredAwards:m}})();return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"æ¾³é–€æ¶ˆè²»çè³è¨˜éŒ„å™¨(å€‹äººç‰ˆ)"}),(0,t.jsx)("p",{className:"text-gray-600",children:"è¨˜éŒ„å’Œç®¡ç†æ‚¨çš„é›»å­å„ªæƒ åˆ¸"})]}),(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsxs)("div",{className:"flex space-x-1 bg-white p-1 rounded-lg shadow-sm border",children:[(0,t.jsx)("button",{onClick:()=>p("list"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat("list"===b?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"),children:"çå“è¨˜éŒ„"}),(0,t.jsx)("button",{onClick:()=>p("summary"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat("summary"===b?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"),children:"çµ±è¨ˆæ‘˜è¦"})]})}),(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,t.jsx)("button",{onClick:()=>{h(void 0),u(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors",children:"+ æ–°å¢çå“"}),(0,t.jsx)("button",{onClick:()=>{try{let t={awards:e,exportDate:new Date().toISOString(),version:"1.0",app:"æ¾³é–€æ¶ˆè²»çè³è¨˜éŒ„å™¨"},a=JSON.stringify(t,null,2),s=new Blob([a],{type:"application/json"}),r=URL.createObjectURL(s),l=document.createElement("a");l.href=r,l.download="macau-spending-rewards-".concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(r),alert("æ•¸æ“šå·²æˆåŠŸå°å‡ºï¼")}catch(e){console.error("Export failed:",e),alert("å°å‡ºå¤±æ•—ï¼Œè«‹é‡è©¦ã€‚")}},disabled:0===e.length,className:"px-4 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 transition-colors ".concat(0===e.length?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"),title:0===e.length?"æ²’æœ‰æ•¸æ“šå¯å°å‡º":"å°å‡ºæ‰€æœ‰çå“æ•¸æ“š",children:"ğŸ“¥ å°å‡ºæ•¸æ“š"}),(0,t.jsxs)("label",{className:"bg-orange-600 text-white px-4 py-2 rounded-md hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-orange-500 transition-colors cursor-pointer",children:["ğŸ“¤ åŒ¯å…¥æ•¸æ“š",(0,t.jsx)("input",{type:"file",accept:".json",onChange:e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];if(!a)return;let r=new FileReader;r.onload=e=>{try{var t;let a=null==(t=e.target)?void 0:t.result,r=JSON.parse(a);if(!r.awards||!Array.isArray(r.awards))throw Error("ç„¡æ•ˆçš„æ•¸æ“šæ ¼å¼");let l=r.awards.filter(e=>e.id&&void 0!==e.value&&e.drawDate&&e.expiryDate&&e.bank);if(0===l.length)throw Error("æ²’æœ‰æ‰¾åˆ°æœ‰æ•ˆçš„çå“æ•¸æ“š");if(!confirm("ç¢ºå®šè¦åŒ¯å…¥ ".concat(l.length," å€‹çå“è¨˜éŒ„å—ï¼Ÿ\n\n")+"é€™å°‡æœƒè¦†è“‹ç¾æœ‰çš„æ‰€æœ‰æ•¸æ“šã€‚\nå»ºè­°å…ˆå°å‡ºç¾æœ‰æ•¸æ“šä½œç‚ºå‚™ä»½ã€‚"))return;localStorage.setItem("macau-spending-rewards-awards",JSON.stringify(l)),s(l),v(c()),alert("æˆåŠŸåŒ¯å…¥ ".concat(l.length," å€‹çå“è¨˜éŒ„ï¼"))}catch(e){console.error("Import failed:",e),alert("åŒ¯å…¥å¤±æ•—ï¼š".concat(e instanceof Error?e.message:"æœªçŸ¥éŒ¯èª¤"))}},r.readAsText(a),e.target.value=""},className:"hidden text-gray-800"})]})]})}),j.length>0&&(0,t.jsx)("div",{className:"mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,t.jsxs)("div",{className:"ml-3",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"æœ¬å‘¨å°šæœªç²å¾—çå“çš„éŠ€è¡Œ"}),(0,t.jsxs)("div",{className:"mt-2 text-sm text-yellow-700",children:[(0,t.jsx)("p",{children:"æ‚¨é‚„æ²’æœ‰å¾ä»¥ä¸‹éŠ€è¡Œç²å¾—æœ¬å‘¨çš„çå“ï¼š"}),(0,t.jsx)("ul",{className:"mt-1 list-disc list-inside space-y-1",children:j.map((e,a)=>(0,t.jsx)("li",{className:"font-medium",children:e},a))}),(0,t.jsx)("p",{className:"mt-2",children:"è¨˜å¾—ä½¿ç”¨é€™äº›éŠ€è¡Œçš„æ”¯ä»˜æ–¹å¼é€²è¡Œæ¶ˆè²»ä¾†ç²å¾—çå“æ©Ÿæœƒï¼"})]})]})]})}),r&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,t.jsx)("div",{className:"p-6",children:(0,t.jsx)(o,{award:g,onSave:g?e=>{if(g){if(Array.isArray(e)){let t=i(g.id,e[0]);t&&s(e=>e.map(e=>e.id===g.id?t:e))}else{let t=i(g.id,e);t&&s(e=>e.map(e=>e.id===g.id?t:e))}v(c()),h(void 0),u(!1)}}:e=>{if(Array.isArray(e)){let t=e.map(e=>n(e));s(e=>[...e,...t])}else{let t=n(e);s(e=>[...e,t])}v(c()),u(!1)},onCancel:()=>{u(!1),h(void 0)},existingAwards:e})})})}),"list"===b?(0,t.jsx)(x,{awards:e,onEdit:e=>{h(e),u(!0)},onDelete:e=>{confirm("ç¢ºå®šè¦åˆªé™¤é€™å€‹çå“è¨˜éŒ„å—ï¼Ÿ")&&(e=>{let t=l(),a=t.filter(t=>t.id!==e);return a.length!==t.length&&(d(a),!0)})(e)&&(s(t=>t.filter(t=>t.id!==e)),v(c()))},onToggleRedeemed:t=>{let a=e.find(e=>e.id===t);if(!a)return;let r=i(t,{redeemed:!a.redeemed,redeemedDate:a.redeemed?void 0:new Date().toISOString()});r&&(s(e=>e.map(e=>e.id===t?r:e)),v(c()))},onUpdateMerchant:(e,t)=>{let a=i(e,{merchant:t});a&&(s(t=>t.map(t=>t.id===e?a:t)),v(c()))}}):(0,t.jsx)(m,{summary:y}),(0,t.jsxs)("div",{className:"mt-12 bg-white p-6 rounded-lg shadow-md border",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"æ´»å‹•è³‡è¨Š"}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 space-y-2",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"æ´»å‹•æœŸé–“ï¼š"}),"2025å¹´9æœˆ1æ—¥ 00:00 è‡³ 2025å¹´11æœˆ30æ—¥ 23:59"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"é›»å­å„ªæƒ é¢å€¼ï¼š"}),"10ã€20ã€50ã€100 æˆ– 200 æ¾³é–€å…ƒ"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"å…Œæ›æœŸé™ï¼š"}),"ç²å¾—å¾Œç·Šæ¥çš„å‘¨å…­åŠå‘¨æ—¥"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"æ³¨æ„ï¼š"}),"é€¾æœŸç„¡æ•ˆï¼Œä¸å¯è½‰è®“æˆ–å…Œç¾"]}),(0,t.jsx)("p",{children:"Donâ€™t thank me, give a hug to Grok!"})]})]})]})})}}]);